# Интернет-магазин ![Logo](./images/logo.png)

## Это **фуллстек** *веб-приложение* с применением ***MERN-стека*** ![MERN](./images/MERN.png).


### 1 Этапы разработки:

#### 1.1 ***Создан UI*** ![UI](./images/ui2.png) на HTML ![HTML5](./images/html5.png) и CSS ![CSS3](./images/css-3.png) с применением препроцессора SCSS ![SCSS](./images/scss.png).
На этом этапе была проведена **вёрстка** всех страниц приложения. Отдельные части интерфейса пользователя были выделены в блоки для дальнейшего превращения их в компоненты.

#### 1.2 ***UI ![UI](./images/ui.png) адаптирован*** ![Adaptation](./images/adaptation.png) под разные разрешения экрана ![Screen Resolution](./images/resolution.png).
Это сделано с помощью **медиа-запросов CSS** при различных разрешениях экрана.

#### 1.3 Написан ***frontend*** ![FrontEnd](./images/frontend.png) на React ![React](./images/react.png). Были использованы следующие инструменты:
- **ReactJS v.18** ![React](./images/react2.png) - основной фронтенд-фреймворк;
- **react-router v.6** ![React-Router](./images/react-router.png) - маршрутизация;
- **redux** ![Redux](./images/redux.png) с применением **redux-toolkit** - хранилище данных.

Созданы отдельные компоненты интерфейса пользователя. Стили сохранены рядом с компонентами. Созданы layouts для основной страницы и для страницы авторизации. Часть компонентов написаны как классовые, а часть как функциональные. В качестве хранилища данных использован redux. Данные для приложения были записаны в файле. Они были актуальны до перезагрузки страницы в браузере.

#### 1.4 ***Фронтенд*** ![FrontEnd](./images/frontend2.png) был ***задеплоен*** ![Deploy](./images/deploy.png) на платформу firebase ![Firebase](./images/firebase.png) для проверки на реальном хостинге ![Hosting](./images/hosting.png).
При этом было сделаны следующие действия:
- на платформе firebase был создан новый проект;
- установлен пакет firebase;
- произведён запуск деплоя на хостинг firebase.

#### 1.5 Написан ***backend*** ![BackEnd](./images/backend.png) на NodeJS ![NodeJs](./images/nodejs.png). Были использованы следующие инструменты:
- **NodeJS v.16** ![NodeJs](./images/nodejs2.png) - основной бэкенд-фреймворк;
- **express** ![Express](./images/express.png) - фреймворк веб-сервера;
- **MongoDB** ![MongoDB](./images/mongodb.png) - база данных;
- **express-validator** ![Express-Validator](./images/express-validator.png) - валидация данных, принятых от фронтенда,  на стороне сервера;
- **jsonwebtoken** ![JWT](./images/jwt.png)- генерирование токена при авторизации пользователя;
- **mongoose** ![Mongoose](./images/mongoose.png) - модели для базы данных MongoDB ![MongoDB](./images/mongodb.png).

При разработки backend-части применены следующие инструменты:
- **config** - создание файла конфигурации при разработке приложения;
- **nodemon** - автоматический перезапуск веб-сервера;
- **concurrently** - одновременный запуск фронтенда и бэкенда;
- **cross-env** - определение NODE_ENV в разных ОС (Windows, Linux, MacOS).

#### 1.6 ***Фронтенд*** был ***доработан*** для получения данных из бэкенда, а не из redux.
Redux стал использоваться как временное хранилище данных для уменьшения запросов к серверу. Все компоненты стали функциональными. Логика осталась только в pages и в layouts. Components стали компонентами без логики. Также использован context для хранения данных авторизации и для корзины товаров.

#### 1.7 Развёртывание (***deploy***) проекта на двух бесплатных хостингах: Heroku ![Heroku](./images/heroku.png) и Vercel ![Vercel](./images/vercel.png).
При развёртывании на **Heroku** было проделано следующее:
- в файле *package.json* добавлены скрипты: heroku-prebuild, heroku-postbuild, heroku-start;
- создан специальный файл *Procfile* для сервиса Heroku;
- в dashboard Heroku произведена настройка ENV переменных для адреса базы данных, ключа для jsonwebtoken, порта запуска приложения, NODE_ENV переменная установлена в production;
- установлен пакет heroku-cli с помощью которого произведён запуск сборки приложения и его deploy на хостинг heroku.

При развёртывании на **Vercel** было сделано:
- установлен пакет vercel-cli в котором произведена инициализация проекта на vercel;
- в файле *package.json* фронтенда добавлен параметр homepage с url-адресом проекта на vercel;
- в dashboard vercel настроены ENV переменные так же, как при деплое на heroku;
- создан файл *vercel.json* с настройками vercel;
- выполнена сборка фронтенда;
- с помощью vercel-cli произведён deploy приложения на хостинг vercel.

### 2. Логика работы веб-приложения:
- пользователь **заходит** на сайт интернет-магазина;
- он может **смотреть** товары и **класть** их в корзину;
- когда пользователь **хочет сделать заказ**, он должен **войти** в свой аккаунт или **зарегистрироваться**;
- после входа в аккаунт пользователь может **оформить заказ**, выбрав способ оплаты и способ доставки;
- если войти под **администратором**, то появляется отдельная страница для редактирования товаров;
- на этой странице можно **добавлять категории товаров, добавлять товары в категории и т.д.**

### 3. Описание данных веб-приложения:

#### 3.1 Для хранения данных используются:
- ***redux***:
  - для хранения категорий товаров. Категории загружаются сразу при открытии веб-приложения;
  - для хранения товаров в категориях. Товары загружаются при открытии категории. Если в категории только один товар, то он не сохраняется в redux. Если товаров больше одного, то они сохраняются.

- ***context***:
  - для хранения данных авторизации пользователя или администратора;
  - для хранения товаров в корзине.

- ***local storage***:
  - для хранения данных авторизации пользователя или администратора;
  - для хранения товаров в корзине.

#### 3.2 Первоначально хранилище данных пустое.
Redux загружается данными при загрузке главной страницы - загружаются все категории. При выборе категории загружаются все находящиеся в ней товары и сохраняются в redux, если товаров больше одного. Если в категории только один товар, то он не сохраняется в redux, а каждый раз запрашивается с сервера.

### 4. Адреса сайта в интернете:
#### 4.1 Только фронтенд на firebase:
https://internet-store-frontend.web.app

#### 4.2 Фуллстек на heroku:
https://internet777store.herokuapp.com

#### 4.3 Фуллстек на vercel:
https://internet777store.vercel.app
